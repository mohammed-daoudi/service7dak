{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ce_Pc/Desktop/service7dak/frontend/src/context/AuthContext.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { createContext, useContext, useEffect, useState, ReactNode } from 'react'\r\n\r\ninterface User {\r\n  _id: string\r\n  username: string\r\n  email: string\r\n  role: string\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  token: string | null\r\n  login: (email: string, password: string) => Promise<void>\r\n  register: (username: string, email: string, password: string) => Promise<void>\r\n  logout: () => void\r\n  isLoading: boolean\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | null>(null)\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [token, setToken] = useState<string | null>(null)\r\n  const [isLoading, setIsLoading] = useState(true) // true on first load\r\n\r\n  // ✅ Rehydrate user on page refresh\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem('token')\r\n    const storedUser = localStorage.getItem('user')\r\n\r\n    if (storedToken && storedUser) {\r\n      setToken(storedToken)\r\n      setUser(JSON.parse(storedUser))\r\n    }\r\n\r\n    setIsLoading(false)\r\n  }, [])\r\n\r\n  const login = async (email: string, password: string) => {\r\n    const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/auth/login`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ email, password }),\r\n    })\r\n\r\n    if (!res.ok) {\r\n      const err = await res.json()\r\n      throw new Error(err.message || 'Login failed')\r\n    }\r\n\r\n    const data = await res.json()\r\n\r\n    localStorage.setItem('token', data.token)\r\n    localStorage.setItem('user', JSON.stringify(data.user))\r\n    setToken(data.token)\r\n    setUser(data.user)\r\n  }\r\n\r\n  const register = async (username: string, email: string, password: string) => {\r\n    const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/auth/register`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ username, email, password }),\r\n    })\r\n\r\n    if (!res.ok) {\r\n      const err = await res.json()\r\n      throw new Error(err.message || 'Registration failed')\r\n    }\r\n\r\n    const data = await res.json()\r\n\r\n    localStorage.setItem('token', data.token)\r\n    localStorage.setItem('user', JSON.stringify(data.user))\r\n    setToken(data.token)\r\n    setUser(data.user)\r\n  }\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('token')\r\n    localStorage.removeItem('user')\r\n    setToken(null)\r\n    setUser(null)\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, token, login, register, logout, isLoading }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\n// ✅ Custom hook for easy access\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext)\r\n  if (!context) throw new Error('useAuth must be used within an AuthProvider')\r\n  return context\r\n}"],"names":[],"mappings":";;;;;;AAyC+B;;AAvC/B;;;AAFA;;AAoBA,MAAM,4BAAc,IAAA,0LAAa,EAAyB;AAEnD,SAAS,aAAa,KAAqC;QAArC,EAAE,QAAQ,EAA2B,GAArC;;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qLAAQ,EAAc;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qLAAQ,EAAgB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qLAAQ,EAAC,MAAM,qBAAqB;;IAEtE,mCAAmC;IACnC,IAAA,sLAAS;kCAAC;YACR,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,MAAM,aAAa,aAAa,OAAO,CAAC;YAExC,IAAI,eAAe,YAAY;gBAC7B,SAAS;gBACT,QAAQ,KAAK,KAAK,CAAC;YACrB;YAEA,aAAa;QACf;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,MAAM,MAAM,MAAM,MAAM,AAAC,GAAkC,kEAAA,oBAAkB;YAC3E,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;QACzC;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,MAAM,MAAM,IAAI,IAAI;YAC1B,MAAM,IAAI,MAAM,IAAI,OAAO,IAAI;QACjC;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,aAAa,OAAO,CAAC,SAAS,KAAK,KAAK;QACxC,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,KAAK,IAAI;QACrD,SAAS,KAAK,KAAK;QACnB,QAAQ,KAAK,IAAI;IACnB;IAEA,MAAM,WAAW,OAAO,UAAkB,OAAe;QACvD,MAAM,MAAM,MAAM,MAAM,AAAC,GAAkC,kEAAA,uBAAqB;YAC9E,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAU;gBAAO;YAAS;QACnD;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,MAAM,MAAM,IAAI,IAAI;YAC1B,MAAM,IAAI,MAAM,IAAI,OAAO,IAAI;QACjC;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,aAAa,OAAO,CAAC,SAAS,KAAK,KAAK;QACxC,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,KAAK,IAAI;QACrD,SAAS,KAAK,KAAK;QACnB,QAAQ,KAAK,IAAI;IACnB;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,SAAS;QACT,QAAQ;IACV;IAEA,qBACE,qMAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAO;YAAU;YAAQ;QAAU;kBAC5E;;;;;;AAGP;GAtEgB;KAAA;AAyET,SAAS;;IACd,MAAM,UAAU,IAAA,uLAAU,EAAC;IAC3B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,OAAO;AACT;IAJgB","debugId":null}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Ce_Pc/Desktop/service7dak/frontend/src/app/providers.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { ReactNode } from 'react'\r\nimport { AuthProvider } from '@/context/AuthContext'\r\n\r\nexport function Providers({ children }: { children: ReactNode }) {\r\n  return (\r\n    <AuthProvider>\r\n      {children}\r\n    </AuthProvider>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKO,SAAS,UAAU,KAAqC;QAArC,EAAE,QAAQ,EAA2B,GAArC;IACxB,qBACE,qMAAC,6JAAY;kBACV;;;;;;AAGP;KANgB","debugId":null}}]
}